[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:xvfb]
command=Xvfb :0 -screen 0 1280x800x24 -ac
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/xvfb-stdout.log
stderr_logfile=/var/log/supervisor/xvfb-stderr.log
priority=100

[program:fluxbox]
command=fluxbox
environment=DISPLAY=":0",HOME="/home/creator"
user=creator
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/fluxbox-stdout.log
stderr_logfile=/var/log/supervisor/fluxbox-stderr.log
priority=150
startsecs=3

[program:x11vnc]
command=x11vnc -display :0 -forever -rfbport 5900 -passwdfile /home/creator/.vnc/passwd_plain -shared -noxdamage
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/x11vnc-stdout.log
stderr_logfile=/var/log/supervisor/x11vnc-stderr.log
priority=200
startsecs=3

[program:openclaw]
command=su - creator -c "cd /home/creator/app && DISPLAY=:0 openclaw start --port 3000"
environment=DISPLAY=":0",HOME="/home/creator"
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/openclaw-stdout.log
stderr_logfile=/var/log/supervisor/openclaw-stderr.log
priority=300
startretries=5
startsecs=10
