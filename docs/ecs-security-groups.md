# ECS 安全组配置

## 必须开放的端口

| 方向 | 端口 | 协议 | 来源 | 用途 |
|------|------|------|------|------|
| 入站 | 22 | TCP | 你的 IP | SSH 远程管理 |
| 入站 | 6080 | TCP | 你的 IP | noVNC Web 浏览器登录（仅限你的 IP） |
| 入站 | 443 | TCP | 0.0.0.0/0 | HTTPS WebChat（如使用域名） |
| 出站 | 全部 | 全部 | 0.0.0.0/0 | API 调用、浏览器访问外部网站 |

## 建议不开放的端口

| 端口 | 说明 |
|------|------|
| 3000 | WebChat 裸端口，应通过 Nginx HTTPS 代理访问 |
| 5901 | VNC 原始端口，使用 noVNC (6080) 替代 |
| 18800-18899 | Chromium CDP 端口，仅本地使用 |

## 安全建议

1. **SSH**：建议仅允许你的固定 IP 或使用密钥登录，禁用密码登录
2. **VNC**：强烈建议限制来源 IP 为你常用的网络地址
3. **WebChat**：生产环境务必配置 Nginx + HTTPS，不要直接暴露 3000 端口
4. **定期审计**：每月检查安全组规则，移除不再需要的开放端口

## 阿里云控制台操作路径

1. 登录 [阿里云控制台](https://ecs.console.aliyun.com/)
2. 找到你的 ECS 实例 → 安全组
3. 点击「配置规则」
4. 按上表添加入站/出站规则
