---
name: cover-generator
description: "自动为各平台生成适配尺寸的封面图/缩略图"
user-invocable: true
command: /cover
metadata: {"openclaw":{"requires":{"config":["browser.enabled"]}}}
---

# 封面自动生成 Skill

## 概述
根据内容主题和目标发布平台，自动生成尺寸适配的封面图/缩略图。
支持调用已配置的图片生成工具（DALL-E、通义万相、Midjourney 等），并按各平台要求裁剪输出。

## 用法
```
/cover <内容描述>
/cover 为我的最新视频生成封面
/cover 帮我做一张小红书封面：主题是...
```

## 各平台封面尺寸规范

| 平台 | 封面用途 | 推荐尺寸 (px) | 宽高比 | 最小尺寸 |
|------|----------|---------------|--------|----------|
| YouTube | 视频缩略图 | 1280x720 | 16:9 | 640x360 |
| B站 | 视频封面 | 1920x1080 | 16:9 | 960x600 |
| 抖音 | 视频封面 | 1080x1920 | 9:16 | 540x960 |
| 小红书 | 笔记封面 | 1080x1440 | 3:4 | 540x720 |
| 小红书 | 方形封面 | 1080x1080 | 1:1 | 540x540 |
| 微信公众号 | 头图封面 | 900x383 | 2.35:1 | 200x200 |
| 微信公众号 | 小图封面 | 200x200 | 1:1 | 200x200 |
| 微信视频号 | 视频封面 | 1080x1920 | 9:16 | 540x960 |
| 快手 | 视频封面 | 1080x1920 | 9:16 | 540x960 |
| 知乎 | 文章封面 | 1920x1080 | 16:9 | 640x360 |
| 微博 | 配图 | 1080x1080 | 1:1 | 420x420 |
| 头条号 | 文章封面 | 1920x1080 | 16:9 | 640x360 |

## 输入
- `description`: 封面主题/内容描述
- `platforms`: 目标平台列表（可多个，默认全平台）
- `style`: 风格偏好（简洁、科技、温馨、强对比等，可选）
- `text_overlay`: 封面上的标题文字（可选）
- `reference_image`: 参考图片路径（可选）

## 执行流程

### 1. 确定目标平台和尺寸
根据 `platforms` 参数确定需要生成的尺寸列表。
如果未指定平台，询问创作者或使用全平台模式。

### 2. 选择图片生成工具
按以下优先级选择已启用的图片生成工具：
1. 用户在 tools.yaml 中设置的 `default_for: [image]` 工具
2. DALL-E（复用 ChatGPT Profile）
3. 通义万相（免费额度）
4. Midjourney（最高质量）

### 3. 构建提示词
基于内容描述，Agent 使用 LLM 优化生成提示词：
- 加入风格关键词
- 如果有 `text_overlay`，在提示中说明文字布局
- 指定目标宽高比

### 4. 生成基础图片
调用选定的图片生成工具 Skill 生成图片。
优先生成最大尺寸版本，后续裁剪适配。

### 5. 适配各平台尺寸
对生成的基础图片，按各平台要求进行：
- 裁剪到目标宽高比
- 缩放到目标分辨率
- 如平台差异大（如 16:9 和 9:16），可能需要生成多张

### 6. 文字叠加（可选）
如果指定了 `text_overlay`：
- 使用 Agent 的 LLM 能力确定文字位置和样式
- 通过图片工具或 HTML Canvas 添加文字

### 7. 展示结果
将生成的各平台封面截图发送给创作者：
```
✅ 封面生成完成：
- YouTube/B站 (16:9): workspace/content/media/images/cover-youtube-xxx.png
- 抖音/快手 (9:16): workspace/content/media/images/cover-douyin-xxx.png
- 小红书 (3:4): workspace/content/media/images/cover-xhs-xxx.png
- 公众号 (2.35:1): workspace/content/media/images/cover-wxmp-xxx.png

满意请回复「确认」，不满意回复修改建议。
```

### 8. 迭代修改
创作者不满意 → 根据反馈修改提示词重新生成。
满意 → 将封面路径关联到对应的内容草稿。

## 输出文件
保存到 `workspace/content/media/images/`，命名规范：
```
cover-{platform}-{date}-{hash}.png
```

## 异常处理
- 无可用图片生成工具 → 提示创作者启用至少一个图片工具
- 生成失败 → 切换到备选工具重试
- 创作者未回复 → 默认使用第一张结果
